{%extends "index.html"%}

{%block formulario%}

{%load static%}

<div class="col-lg-12">
    <div class="card">
        <div class="card-body">
            <form class="abrir-caja-input" action="{% url 'abrir_caja' caja_actual %}" id="formCliente" method="POST">
                    <div>
                        {% csrf_token %}
                        <input style="display: none;" name="nombredelusuario" value="{{nombre_completo}}">>


                        <label for="ingresar-nombre"> Ingresar monto para abrir la caja </label>
                        <input type="text" class="form-control" id="formGroupExampleInput2" name="entrada_caja"
                            value="{{parameters.datos_act.entrada_caja}}">

                        {% for lista in parameters.listausuario %}
                        <input value="{{lista.codigo_usuario}}" {% if
                            lista.codigo_usuario == parameters.datos_act.nombre_usuario_id%} {{lista.nombre_usuario}} {%
                            endif %} style="visibility: hidden;">
                        </input>
                        {% endfor %}

                        <input type="date" id="fechaActual" name="fecha_caja"
                            value="{{parameters.datos_act.fecha_caja}}">
                        <input type=" text" id="currentTime" name="hora_caja" value="{{parameters.datos_act.hora_caja}}"
                            style="visibility: hidden;">
                        <input style="display: none;" name="tipo_mov" value="2" type="number">

                    </div>
                    <div class="clearfix mb-12 text-muted" style="display: flex;justify-content: end;padding: 1em 0;">
                        <a href="{% url 'movimiento_caja' %}" style="margin-right: 5px; margin-top: -1px;" onclick="checker()"
                            type="submit">
                            Abrir 
                        </a>
                        <a href="{% url 'movimiento_caja' %}">
                            <span> Volver</span>
                        </a>
                    </div>
            </form>
        </div>
    </div>
</div>
<script>
    window.onload = function () {
        var fecha = new Date(); //Fecha actual
        var mes = fecha.getMonth() + 1; //obteniendo mes
        var dia = fecha.getDate(); //obteniendo dia
        var ano = fecha.getFullYear(); //obteniendo aÃ±o
        if (dia < 10)
            dia = '0' + dia; //agrega cero si el menor de 10
        if (mes < 10)
            mes = '0' + mes //agrega cero si el menor de 10
        document.getElementById('fechaActual').value = ano + "-" + mes + "-" + dia;
    } 
</script>

<script>
    var today = new Date();
    var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
    document.getElementById("currentTime").value = time;
</script>
<script>
    function checker() {
        var result = confirm('Estas seguro que quieres abrir la caja?');
        if (result == false) {
            event.preventDefault();
        }
    }
</script>
</body>
{%endblock%}

{%block extra%}

{%endblock%}